# 📱 Map Analyzer - ビルド不要!使い方ガイド (日本語完全版)

## 🎯 このガイドについて

**「Flutterって何?」**
**「開発環境のセットアップが面倒...」**
**「とにかくすぐに使いたい!」**

そんなあなたのためのガイドです!

**重要**: Flutter SDKやプログラミングの知識は一切不要です!

---

## 🚀 3ステップで始める

### ステップ1️⃣: ダウンロード

**GitHub Releases**から自分のOSに合ったファイルをダウンロード:

👉 **https://github.com/geomatsuyama/Maptag/releases**

#### あなたのパソコンのOSは?

**🪟 Windowsの場合:**
- ファイル名: `MapAnalyzer_Setup_v1.0.0_x64.exe`
- サイズ: 約25-30MB
- 確認方法: Windowsキー → 「設定」 → 「システム」 → 「バージョン情報」

**🍎 Macの場合:**
- ファイル名: `MapAnalyzer_v1.0.0_macOS.dmg`
- サイズ: 約20-25MB
- 確認方法: 画面左上のAppleマーク → 「このMacについて」

**🐧 Linuxの場合:**
- ファイル名: `MapAnalyzer-1.0.0-x86_64.AppImage` ← おすすめ!
- または: `map-analyzer_1.0.0_amd64.deb` (Ubuntu/Debian)
- サイズ: 約23-28MB

---

### ステップ2️⃣: インストール

#### 🪟 Windowsの場合

1. ダウンロードした `MapAnalyzer_Setup_v1.0.0_x64.exe` をダブルクリック
2. 「実行」をクリック (警告が出た場合)
3. セットアップウィザードが開きます

**セットアップ手順:**
- **言語選択**: 日本語 または English
- **ライセンス**: 読んで「同意する」にチェック
- **インストール先**: デフォルトでOK (変更可能)
- **ショートカット**: デスクトップアイコンを作成 (推奨)
- **インストール**: 「インストール」ボタンをクリック (約30秒)

4. 完了!スタートメニューから「Map Analyzer」を探して起動

---

#### 🍎 Macの場合

1. ダウンロードした `MapAnalyzer_v1.0.0_macOS.dmg` をダブルクリック
2. DMGファイルがマウントされます (ウィンドウが開く)
3. `Map Analyzer.app` を `Applications` フォルダにドラッグ&ドロップ
4. DMGアイコンをデスクトップからイジェクト (右クリック → 取り出す)
5. Launchpadから「Map Analyzer」を探して起動

**⚠️ 初回起動時に警告が出た場合:**
- 「開発元が未確認」エラー:
  1. 「システム環境設定」 → 「セキュリティとプライバシー」
  2. 「このまま開く」をクリック

---

#### 🐧 Linuxの場合

**AppImage (最も簡単!):**
```bash
# 1. ダウンロードしたファイルがあるフォルダに移動
cd ~/ダウンロード

# 2. 実行権限を付与
chmod +x MapAnalyzer-1.0.0-x86_64.AppImage

# 3. 実行
./MapAnalyzer-1.0.0-x86_64.AppImage
```

**DEBパッケージ (Ubuntu/Debian):**
```bash
# インストール
sudo dpkg -i map-analyzer_1.0.0_amd64.deb

# 依存関係を自動修正
sudo apt-get install -f

# 起動
map-analyzer
```

**または、アプリケーションメニューから「Map Analyzer」を起動**

---

### ステップ3️⃣: 初回設定 (5分)

アプリを起動すると、初回設定画面が表示されます。

#### 設定1: Mapillary APIキー

**取得方法:**
1. ブラウザで https://www.mapillary.com/developer を開く
2. 「Sign Up」でアカウント登録 (無料)
3. 「Create New Application」をクリック
4. アプリ名を入力 (例: "My Map Analyzer")
5. **Client ID**をコピー
6. Map Analyzerの設定画面に貼り付け

**時間**: 約3分

#### 設定2: Gemini APIキー

**取得方法:**
1. ブラウザで https://makersuite.google.com/app/apikey を開く
2. Googleアカウントでサインイン
3. 「Create API Key」をクリック
4. プロジェクトを選択 (または新規作成)
5. **APIキー**をコピー
6. Map Analyzerの設定画面に貼り付け

**時間**: 約2分

#### 設定3: モード選択

**無料モード** (初心者向け):
- 1回の検索で最大100枚の画像
- 小規模な分析に最適

**有料モード** (上級者向け):
- 1回の検索で最大200,000枚の画像
- 大規模GIS分析に最適

**自己申告制**: 設定画面で選択するだけ (支払い不要)

---

## 💡 基本的な使い方

### 1. Mapillary画像を検索

#### 方法1: 地点+半径検索

1. 「Mapillary」タブをクリック
2. 「地点+半径」を選択
3. 緯度・経度を入力 (例: 東京タワー 35.6586, 139.7454)
4. 半径を入力 (例: 1000メートル)
5. 「検索」をクリック

**結果**: 指定した地点から半径1km以内の画像が表示される

#### 方法2: 地図で範囲を指定

1. 「地図で検索」タブをクリック
2. 地図上で範囲を指定:
   - **矩形**: 四角形を描く
   - **ポリゴン**: 複雑な形を描く
3. 「検索」をクリック

**便利!**: OpenStreetMap上で直感的に範囲指定できる

---

### 2. 検索結果を確認

**表示される情報:**
- 📍 位置情報 (緯度・経度・高度)
- 📅 撮影日時
- 🧭 方位角
- 📷 カメラ情報
- 🔗 Mapillaryリンク
- 🖼️ サムネイル画像

**検索結果の操作:**
- 並べ替え (日時、距離等)
- フィルター (日付範囲、方位角等)
- プレビュー (クリックで拡大)

---

### 3. Gemini AIで分析 (オプション)

#### クイックプロンプト

1. 「AI分析」タブをクリック
2. クイックプロンプトから選択:
   - 「シーン説明」
   - 「物体検出」
   - 「道路状況」
   - 「安全性評価」
3. 分析したい画像を選択
4. 「分析開始」をクリック

**処理時間**: 100枚あたり約5-10分

#### カスタムプロンプト

1. 「カスタムプロンプト」を選択
2. 自由に質問を入力:
   - 例: 「この画像に写っている交通標識の種類を教えて」
   - 例: 「歩道の状態を評価して」
3. 「分析開始」をクリック

**ヒント**: 具体的な質問ほど良い結果が得られます

#### サンプルプレビュー

**重要機能!**
- 本格的な分析前に、3枚のサンプルで結果をプレビュー
- プロンプトが適切か確認できる
- やり直しも簡単

---

### 4. データをエクスポート

#### ステップ1: エクスポート形式を選択

1. 「データエクスポート」タブをクリック
2. 形式を選択:
   - **JSON**: GIS解析用 (QGIS、ArcGIS等)
   - **Excel**: スプレッドシート分析用
   - **CSV**: 汎用データ形式

#### ステップ2: エクスポート内容を選択

**含める内容:**
- ☑️ EXIF情報 (位置、日時、カメラ)
- ☑️ Mapillaryメタデータ (シーケンスID、撮影者)
- ☑️ AI分析結果 (実行した場合)

#### ステップ3: エクスポート実行

1. 「エクスポート」ボタンをクリック
2. 保存先を選択
3. ファイル名を入力
4. 「保存」

**処理時間**: 10,000レコードあたり約10-30秒

---

## 🎓 実践例

### 例1: 東京タワー周辺の画像を収集

**目的**: 観光エリアの写真を集める

**手順:**
1. Mapillaryタブで「地点+半径」を選択
2. 緯度: `35.6586`、経度: `139.7454`、半径: `500` (500m)
3. 検索実行
4. JSON形式でエクスポート
5. QGISで地図上に表示

**結果**: 約50-100枚の画像メタデータ取得

---

### 例2: 道路の安全性を評価

**目的**: 通学路の安全性をAIで評価

**手順:**
1. 地図で通学路のエリアを指定 (ポリゴン)
2. Mapillary検索実行
3. AI分析タブで「安全性評価」プロンプトを選択
4. サンプルプレビューで確認
5. バッチ分析実行
6. Excel形式でエクスポート

**結果**: 各地点の安全性スコアとコメント

---

### 例3: 大規模データ収集 (上級者向け)

**目的**: 渋谷区全域の画像メタデータ収集

**手順:**
1. 有料モードに切り替え
2. 地図で渋谷区の範囲を指定 (ポリゴン)
3. Mapillary検索実行 (最大200,000枚)
4. JSON形式でエクスポート (AI分析なし)
5. GISソフトで解析

**処理時間**: 約10-20分
**データサイズ**: 約50-100MB

---

## 🔧 トラブルシューティング

### ❌ "APIキーが無効です"エラー

**原因**: APIキーが正しくない、または期限切れ

**解決策:**
1. 設定画面でAPIキーを再確認
2. Mapillary/Gemini公式サイトで新しいキーを取得
3. アプリを再起動

---

### ❌ "検索結果が0件です"エラー

**原因**: 指定したエリアにMapillary画像がない

**解決策:**
1. 範囲を広げてみる (半径を大きく)
2. 別のエリアを試す
3. Mapillary公式サイトで画像があるか確認

---

### ❌ "メモリ不足"エラー

**原因**: 一度に大量のデータを処理しようとした

**解決策:**
1. 検索範囲を縮小
2. バッチ分析の枚数を減らす
3. アプリを再起動してメモリを解放

---

### ❌ Windows: "Visual C++ Redistributable"エラー

**原因**: 必要なランタイムが未インストール

**解決策:**
1. 以下をダウンロード: https://aka.ms/vs/17/release/vc_redist.x64.exe
2. インストール
3. PCを再起動
4. Map Analyzerを再起動

---

### ❌ macOS: "開けません"エラー

**原因**: macOSのセキュリティ設定

**解決策1 (GUI):**
1. 「システム環境設定」 → 「セキュリティとプライバシー」
2. 「このまま開く」をクリック

**解決策2 (コマンドライン):**
```bash
xattr -cr /Applications/Map\ Analyzer.app
```

---

### ❌ Linux: 実行できない

**原因**: 実行権限がない

**解決策:**
```bash
chmod +x MapAnalyzer-1.0.0-x86_64.AppImage
```

---

## 📊 パフォーマンスガイド

### 処理時間の目安

| 操作 | 枚数 | 所要時間 |
|------|------|---------|
| Mapillary検索 | 100枚 | 5-10秒 |
| Mapillary検索 | 1,000枚 | 30秒-1分 |
| Mapillary検索 | 10,000枚 | 1-2分 |
| AI分析 | 100枚 | 5-10分 |
| AI分析 | 1,000枚 | 1-2時間 |
| Excelエクスポート | 10,000枚 | 10-30秒 |

**ヒント**: AI分析は時間がかかるので、必要な画像だけに絞る

---

### システム要件別の推奨枚数

| スペック | RAM | 推奨枚数 | 用途 |
|---------|-----|---------|------|
| 最小 | 4GB | 100-500枚 | 小規模分析 |
| 推奨 | 8GB | 500-5,000枚 | 中規模分析 |
| 高性能 | 16GB+ | 5,000-200,000枚 | 大規模GIS分析 |

---

## 💰 費用について

### アプリ本体
**完全無料!** (MITライセンス)

### APIの利用料金

**Mapillary API:**
- **無料プラン**: 制限あり (詳細は公式サイト参照)
- **有料プラン**: 大量アクセス可能

**Gemini API:**
- **無料プラン**: 月間制限あり (詳細は公式サイト参照)
- **有料プラン**: 制限緩和

**推奨**: 初心者は無料プランから始める

---

## 🎯 よくある質問 (初心者向け)

### Q1: プログラミングの知識は必要ですか?
**A**: いいえ、不要です!すべてGUIで操作できます。

### Q2: Flutter SDKって何ですか?
**A**: 開発者用のツールです。ユーザーは気にしなくてOKです!

### Q3: インストールは難しいですか?
**A**: いいえ!普通のアプリと同じようにインストールできます。

### Q4: オフラインでも使えますか?
**A**: 検索と分析にはインターネットが必要です。エクスポート機能のみオフラインで使えます。

### Q5: データは安全ですか?
**A**: はい!すべてローカルに保存され、外部に送信されません (API呼び出し時を除く)。

### Q6: Windowsのバージョンは?
**A**: Windows 10 (バージョン1809) 以上が必要です。

### Q7: Macのバージョンは?
**A**: macOS 12 (Monterey) 以上が必要です。

### Q8: アンインストールは簡単ですか?
**A**: はい!通常のアプリと同じ方法でアンインストールできます。

---

## 📞 サポート

**困ったときは:**
1. このガイドを再確認
2. [INSTALLER_FAQ.md](INSTALLER_FAQ.md) を参照 (28問のFAQ)
3. GitHub Issues で質問: https://github.com/geomatsuyama/Maptag/issues

---

## 🌟 便利な機能

### 検索履歴
- 過去の検索条件を保存
- ワンクリックで再検索

### お気に入りエリア
- よく使うエリアを登録
- 次回から簡単にアクセス

### エクスポートテンプレート
- よく使うエクスポート設定を保存
- 毎回同じ設定をする手間を省く

### 進捗表示
- 大量データ処理時の進捗をリアルタイム表示
- キャンセルも可能

---

## 🎓 次のステップ

### 初心者向け
1. まずは小規模エリアで試す (100枚以下)
2. AIクイックプロンプトを試す
3. JSONエクスポートしてQGISで可視化

### 中級者向け
1. カスタムプロンプトを作成
2. 中規模エリアで分析 (1,000-5,000枚)
3. Excelで統計分析

### 上級者向け
1. 有料モードで大規模データ収集 (10,000枚以上)
2. GISソフトで高度な空間解析
3. 自動化スクリプトとの連携

---

## 🎉 今すぐ始めましょう!

1. **ダウンロード**: https://github.com/geomatsuyama/Maptag/releases
2. **インストール**: 3分
3. **APIキー設定**: 5分
4. **使い始める**: すぐに!

**Flutter SDKは一切不要!今すぐMap Analyzerを体験してください!**

---

**Map Analyzer v1.0.0**
© 2025 MapAnalyzer Project

**誰でも簡単に使えるGIS分析ツール! 🚀**
